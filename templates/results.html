{% extends "base.html" %}

{% block title %}Test Results{% endblock %}

{% block additional_styles %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/results.css') }}">
{% endblock %}

{% block content %}
<div class="results-container">
    <div class="container">
        <!-- Results Header -->
        <div class="results-header">
            <h2>Test Results</h2>
            <div class="test-info">
                <span id="testType">Loading...</span> â€¢ 
                <span id="testDate">Loading...</span>
            </div>
        </div>

        <!-- Summary Stats -->
        <div class="row g-4 mb-4">
            <div class="col-md-2">
                <div class="stats-card">
                    <h4>Total Questions</h4>
                    <div class="stat-value" id="totalQuestions">--</div>
                </div>
            </div>
            <div class="col-md-2">
                <div class="stats-card">
                    <h4>Correct Answers</h4>
                    <div class="stat-value" id="correctAnswers">--</div>
                </div>
            </div>
            <div class="col-md-2">
                <div class="stats-card">
                    <h4>Accuracy</h4>
                    <div class="stat-value" id="accuracy">--%</div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="stats-card">
                    <h4>Total Time</h4>
                    <div class="stat-value" id="totalTime">--</div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="stats-card">
                    <h4>Avg Time/Question</h4>
                    <div class="stat-value" id="avgTime">--</div>
                </div>
            </div>
        </div>

        <!-- Time Chart -->
        <div class="row mb-4">
            <div class="col-12">
                <div class="chart-card">
                    <h3>Time per Question</h3>
                    <div class="chart-container">
                        <canvas id="timeChart"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <!-- Wrong Questions -->
        <div class="row">
            <div class="col-12">
                <div class="wrong-questions">
                    <h3>Questions to Review</h3>
                    <div id="wrongQuestionsList">
                        <div class="text-center">
                            <div class="spinner-border text-primary" role="status">
                                <span class="visually-hidden">Loading...</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="{{ url_for('static', filename='js/results-init.js') }}"></script>
{% endblock %}
